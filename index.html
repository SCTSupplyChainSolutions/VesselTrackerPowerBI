<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: 'Montserrat', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f9f9f9;
}
#radarChart {
  width: 100%;
  height: 100%;
}
</style>
</head>
<body>
<div id="radarChart"></div>
<script>
const dataPoints = [
  {"Category": "Payment History", "Value": 8},
  {"Category": "Deposit Coverage", "Value": 5},
  {"Category": "Concentration Risk", "Value": 9},
  {"Category": "Margin Quality", "Value": 8},
  {"Category": "Sector Risk", "Value": 2}
];

const categories = dataPoints.map(d => d.Category);
const values = dataPoints.map(d => d.Value);

// Close the loop for radar chart
const radarValues = [...values, values[0]];
const radarCategories = [...categories, categories[0]];

// Radar data overlay
const radarTrace = {
  type: 'scatterpolar',
  r: radarValues,
  theta: radarCategories,
  fill: 'toself',
  line: { color: '#ff7f0e', width: 2 },
  hoverinfo: 'skip',
  name: 'Risk'
};

// Labels inside chart
const labelTrace = {
  type: 'scatterpolar',
  r: values.map(v => v + 1), // slightly outside data points
  theta: categories,
  mode: 'text',
  text: categories,
  textposition: 'middle center',
  textfont: { size: 12, color: '#333' },
  hoverinfo: 'skip',
  showlegend: false
};

const layout = {
  polar: {
    radialaxis: { visible: false, range: [0, 10] },  // hide circles
    angularaxis: { showticklabels: false },          // hide default labels
    bgcolor: 'rgba(0,0,0,0)'
  },
  showlegend: false,
  margin: { t: 20, b: 20, l: 20, r: 20 }
};

const config = { displayModeBar: false, responsive: true };
const chartDiv = document.getElementById('radarChart');

function resizeChart() {
  Plotly.Plots.resize(chartDiv);
}

// Initial render
Plotly.newPlot(chartDiv, [radarTrace, labelTrace], layout, config);
window.addEventListener('resize', resizeChart);
setInterval(resizeChart, 100);
</script>
</body>
</html>
